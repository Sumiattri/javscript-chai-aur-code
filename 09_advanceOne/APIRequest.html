<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body style="background-color: #212121">
    0 UNSENT Client has been created. open() not called yet. 1 OPENED open() has
    been called. 2 HEADERS_RECEIVED send() has been called, and headers and
    status are available. 3 LOADING Downloading; responseText holds partial
    data. 4 DONE The operation is complete.
  </body>
  <script>
    // const requestUrl = 'https://api.github.com/users/hiteshchoudhary'
    // const xhr = new XMLHttpRequest();
    // xhr.open('GET', "https://api.github.com/users/Sumitattri",true)
    // xhr.onreadystatechange = function(){
    //     console.log(xhr.readyState);
    //     if (xhr.readyState === 4) {
    //         const data = JSON.parse(this.responseText)
    //         console.log(typeof data);
    //         console.log(data);
    //         console.log(data.followers);

    //     }
    // }
    // xhr.send();

    let xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function () {
      switch (xhr.readyState) {
        case 0:
          console.log("Request not initialized");
          break;
        case 1:
          console.log("Connection established (open() called)");
          break;
        case 2:
          console.log("Request sent, headers received");
          break;
        case 3:
          console.log("Loading response...");
          break;
        case 4:
          if (xhr.status === 200) {
            console.log("Request complete:", JSON.parse(xhr.responseText));
          } else {
            console.error("Error:", xhr.status);
          }
          break;
      }
    };

    /****        Using onload function which dentoes readyState 4      *****/

    let xhr = new XMLHttpRequest();

    xhr.open("GET", "https://jsonplaceholder.typicode.com/posts/1", true);

    xhr.onload = function () {
      if (xhr.status === 200) {
        console.log(JSON.parse(xhr.responseText)); // Parse JSON response
      } else {
        console.error("Error:", xhr.status);
      }
    };

    xhr.send(); // Send request

    xhr.open("GET", "https://jsonplaceholder.typicode.com/posts/1", true);
    xhr.send();

    /*****     sending data through XMLHTTP Request( POST Method)        ***/

    // let xhr = new XMLHttpRequest();

    // xhr.open("POST", "https://jsonplaceholder.typicode.com/posts", true);
    // xhr.setRequestHeader("Content-Type", "application/json"); // Set header

    // xhr.onload = function () {
    //   if (xhr.status === 201) {
    //     // 201 = Created
    //     console.log(JSON.parse(xhr.responseText)); // Response from server
    //   } else {
    //     console.error("Error:", xhr.status);
    //   }
    // };

    // let data = JSON.stringify({
    //   title: "My Post",
    //   body: "This is a new post",
    //   userId: 1,
    // });

    // xhr.send(data);
  </script>
</html>
